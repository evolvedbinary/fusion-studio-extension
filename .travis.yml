language: node_js
node_js:
  - "8"

matrix:
  include:
    - os: linux
      dist: xenial
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - libx11-dev
            - libxkbfile-dev
            - libgconf2-4
    - os: osx
      osx_image: xcode10.1
      homebrew:
        packages:
          - yarn
#  - os: windows

env:
  global:
    - ELECTRON_CACHE=$HOME/.cache/electron
    - ELECTRON_BUILDER_CACHE=$HOME/.cache/electron-builder
    - YARN_GPG=no

before_install:
  - node --version && yarn --version && python --version

install:
  - yarn

before_script:
  - yarn run sass

script:
  - yarn run cypress

before_cache:
  - rm -rf $HOME/.cache/electron-builder/wine

cache: yarn
  # directories:
  # - node_modules
  # - $HOME/.cache
  # - $HOME/.npm/_prebuilds
